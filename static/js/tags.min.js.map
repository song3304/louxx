{"version":3,"sources":["tags.js"],"names":["$","fn","extend","tags","params","this","each","$this","_config","language","ajax","url","baseuri","dataType","type","delay","data","_params","v","page","_token","crsf","filters","of","keywords","like","term","processResults","json","result","items","i","length","push","id","text","count","selection","results","cache","escapeMarkup","markup","minimumInputLength","templateResult","templateSelection","createTag","trim","newTag","select2","jQuery"],"mappings":";CAAA,SAAUA,GACVA,EAAEC,GAAGC,QAAQC,KAAM,SAASC,GAC3B,MAAOC,MAAKC,KAAK,WAChB,GAAIC,GAAQP,EAAEK,MACVG,GACHC,SAAU,QACVC,MACCC,IAAKX,EAAEY,QAAS,WAChBC,SAAU,OACVC,KAAM,OACNC,MAAO,IACPC,KAAM,SAAUC,GACf,GAAIC,IAAKC,KAAMF,EAAQE,KAAMC,OAAQpB,EAAEqB,KAAMC,WAAaC,GAAI,OAG9D,OAFAL,GAAEI,QAAQE,UAAYC,KAAQR,EAAQS,MACtCR,EAAIlB,EAAEE,QAAO,EAAMgB,EAAGd,IAGvBuB,eAAgB,SAAUC,EAAMT,GAC/B,GAAmB,WAAfS,EAAKC,QAAsC,OAAfD,EAAKC,OAAiB,OAAQA,UAE9D,KAAI,GADAb,MAAWc,EAAQF,EAAKZ,KAAKA,KACzBe,EAAI,EAAGA,EAAID,EAAME,SAAUD,EAClCf,EAAKiB,MAAMC,GAAMJ,EAAMC,GAAGP,SAAUW,KAAQL,EAAMC,GAAGP,SAAW,+BAAgCM,EAAMC,GAAGK,OAAS,GAAK,6BAAeC,UAAaP,EAAMC,GAAGP,UAC7J,QAAQc,QAAStB,IAElBuB,OAAO,GAERC,aAAc,SAAUC,GAAS,MAAOA,IACxCC,mBAAoB,EACpBC,eAAgB,SAAS3B,GAAM,MAAOA,GAAKmB,MAC3CS,kBAAmB,SAAS5B,GAAM,MAAOA,GAAKqB,WAAarB,EAAKmB,MAChEU,UAAW,SAAU5B,GACpB,GAAIS,GAAO1B,EAAE8C,KAAK7B,EAAQS,KAC1B,OAAa,KAATA,EAAoB,MAEvBQ,GAAIR,EACJW,UAAWX,EACXS,KAAMT,EAAO,qDACbqB,QAAQ,IAIXxC,GAAMyC,QAAQhD,EAAEE,QAAQC,MAAM,GAAOK,UAGpCyC","file":"tags.min.js","sourcesContent":["(function($){\r\n$.fn.extend({tags: function(params){\r\n\treturn this.each(function(){\r\n\t\tvar $this = $(this);\r\n\t\tvar _config = {\r\n\t\t\tlanguage: \"zh-CN\",\r\n\t\t\tajax: {\r\n\t\t\t\turl: $.baseuri +'tag/data',\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\ttype: 'post',\r\n\t\t\t\tdelay: 250,\r\n\t\t\t\tdata: function (_params) {\r\n\t\t\t\t\tvar v = {page: _params.page, _token: $.crsf, filters: {}, of: 'json'};\r\n\t\t\t\t\tv.filters.keywords = {'like': _params.term};\r\n\t\t\t\t\tv = $.extend(true, v, params);\r\n\t\t\t\t\treturn v;\r\n\t\t\t\t},\r\n\t\t\t\tprocessResults: function (json, page) {\r\n\t\t\t\t\tif (json.result != 'success' && json.result != 'api') return {result: []};\r\n\t\t\t\t\tvar data = [], items = json.data.data;\r\n\t\t\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t\t\t\tdata.push({'id': items[i].keywords, 'text': items[i].keywords + ' <span class=\"text-muted\">('+ (items[i].count || 0) + '次使用)</span>', 'selection': items[i].keywords });\r\n\t\t\t\t\treturn {results: data};\r\n\t\t\t\t},\r\n\t\t\t\tcache: true\r\n\t\t\t},\r\n\t\t\tescapeMarkup: function (markup) {return markup;},\r\n\t\t\tminimumInputLength: 1,\r\n\t\t\ttemplateResult: function(data){return data.text;},\r\n\t\t\ttemplateSelection: function(data){return data.selection || data.text;},\r\n\t\t\tcreateTag: function (_params) {\r\n\t\t\t\tvar term = $.trim(_params.term);\r\n\t\t\t\tif (term === '') return null;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: term,\r\n\t\t\t\t\tselection: term,\r\n\t\t\t\t\ttext: term + ' <span style=\"color:#f5f5f5\">(创建)</span>',\r\n\t\t\t\t\tnewTag: true // add additional parameters\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\t\t$this.select2($.extend({tags: true}, _config));\r\n\t});\r\n}});\r\n})(jQuery);"]}